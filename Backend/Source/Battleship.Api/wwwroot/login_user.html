<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <link rel="stylesheet" href="login.css">
    <!------ Include the above in your HEAD tag ---------->
</head>
<body>


<div class="wrapper fadeInDown">
    <div id="formContent">


        <!-- titel -->
        <div class="fadeIn first">
            <br><br>
            <h1>Welkom bij zeeslag</h1>
            <h2>Door Sailor Team 1</h2>
        </div>

        <!-- Login Form -->
        <form name="loginForm">
            <input type="email" id="email" class="fadeIn second" name="email" placeholder="E-mail"><br />
            <input type="password" id="paswoord" class="fadeIn third" name="login" placeholder="Wachtwoord"><br>
            <input type="button" id="logFetch" class="fadeIn fourth" value="inloggen">
        </form>

        <script>
            window.addEventListener("load", loaded);
            function loaded() {
                let buttonPost = document.getElementById('logFetch');
                buttonPost.addEventListener("click", logFunction);
            }

            function logFunction() {

                let email = document.getElementById('email').value;
                let paswoord = document.getElementById('paswoord').value;
                let user = { email: email, password: paswoord };
                let url = 'https://localhost:5001/api/Authentication/token';
                let is_loggedin = false;
                fetch(url,
                    {
                        method: "POST",
                        body: JSON.stringify(user),
                        headers: {
                            'Accept': 'application/json',
                            'Content-Type': 'application/json',
                            'Authorization': 'Bearer ' + sessionStorage.getItem("token")
                        }
                        })
                    .then((response) => {
                        if (response.status == 200) {
                            window.location.href = "https://localhost:5001/index.html";
                            return response.json();
                            
                        } else {
                            alert("foute inloggegevens, probeer opnieuw!")
                            throw `error with status ${response.status}`;
                        }
                        })
                    .then((user) => {
                        let data = [];
                        data.push([user.email, user.password]);
                    });
                    //.then((redirect) => {
                    //    if (is_loggedin) {
                            
                    //    }
                    //    })                        
                    
                
            }

        </script>

        <!-- wachtwoord vergeten + account aanmaken -->
        <div id="formFooter">
            <a class="underlineHover" href="registratie_user.html">Account aanmaken</a>
            <br>
            <a class="underlineHover" href="wachtwoord_vergeten.html">Wachtwoord vergeten?</a>

        </div>

    </div>
</div>
</body>
</html>