<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>registratie</title>

    <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <link rel="stylesheet" href="login.css">
</head>
<body>
<div class="wrapper fadeInDown">
    <div id="formContent">

        <!-- titel -->
        <div class="fadeIn first">
            <br><br>
            <h1>Registreren</h1><br>
        </div>

        <!-- register Form -->
        <form name="regForm">
            <input type="email" id="email" class="fadeIn second" name="email" placeholder="E-mail"><br>
            <input type="text" id="gebruikersnaam" class="fadeIn second" name="gebruikersnaam" placeholder="gebruikersnaam"><br>
            <input type="password" id="paswoord" class="fadeIn third" name="login" placeholder="Wachtwoord"><br>
            <input type="button" id="regPost" class="fadeIn fourth" value="registreren" >
        </form>
        <script>
            window.addEventListener("load", loaded);
            function loaded() {
                let buttonPost = document.getElementById('regPost');
                buttonPost.addEventListener("click", regFunction);
            }

            function regFunction() {
               
                let email = document.getElementById('email').value;
                let gebruikersnaam = document.getElementById('gebruikersnaam').value;
                let paswoord = document.getElementById('paswoord').value;
                let user = { email: email, nickName: gebruikersnaam, password: paswoord };
                let url = 'https://localhost:5001/api/Authentication/register';
                fetch(url,
                    {
                        method: "POST",
                        body: JSON.stringify(user),
                        headers: {
                            'Accept': 'application/json',
                            'Content-Type': 'application/json'
                        }
                    })
                    .then((response) => {
                        if (response.status == 201) {
                            return response.json();
                        } else {
                            throw `error with status ${response.status}`;
                        }
                    })
                    .then((user) => {
                        let data = [];
                        data.push([user.email, user.gebruikersnaam, user.paswoord]);

                    });
                    
            }

        </script>
        <!-- terug naar login -->
        <div id="formFooter">
            <a class="underlineHover" href="login_user.html">Al een account? <br> Naar de login pagina.</a>

        </div>

    </div>
</div>
</body>
</html>